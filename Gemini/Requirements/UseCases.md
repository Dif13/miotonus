# Use Cases приложения "Miotonus"

## Общее описание

Данный документ содержит описание Use Cases (вариантов использования) для приложения "Miotonus". Приложение предназначено для взаимодействия между спортсменами и тренерами с целью отслеживания и улучшения мышечного тонуса спортсменов. Use Cases описывают основные действия, которые пользователи могут выполнять в приложении.

**Структура документа:**

Документ разделен на разделы, соответствующие основным ролям в приложении: "Спортсмен" и "Тренер". Каждый раздел, в свою очередь, разбит на функциональные блоки, такие как "Регистрация и авторизация", "Профиль", "Взаимодействие", "Тренировка" и т.д.

**Назначение Use Cases:**

Use Cases предназначены для:

*   **Определения функциональных требований:** Они описывают, что именно должно делать приложение.
*   **Планирования разработки:** Они помогают разработчикам понять, какие функции нужно реализовать и в какой последовательности.
*   **Коммуникации между участниками проекта:** Они служат общим языком для обсуждения функциональности приложения между заказчиками, аналитиками, разработчиками и тестировщиками.
* **Связи с User story**: Каждый use case имеет свою связь с одной или несколькими user story, для обеспечения полноты и целостности функционала.

**Связь с User Stories:**

Каждый Use Case связан с одной или несколькими User Stories (пользовательскими историями), которые описаны в отдельных файлах (`Athlete.md` и `Coach.md`). User Stories описывают потребности пользователей, а Use Cases детализируют, как именно эти потребности будут реализованы в приложении.

**Роли:**

В приложении определены две основные роли:

*   **Спортсмен:** Пользователь, который отслеживает свой мышечный тонус и тренируется с помощью приложения.
*   **Тренер:** Пользователь, который помогает спортсменам достигать их целей, дает рекомендации и отслеживает их прогресс.

**Принципы именования:**

*   Названия Use Cases начинаются с глагола в инфинитиве (например, "Аутентифицировать пользователя", "Просмотреть профиль").
*   Названия Use Cases должны быть краткими и понятными.

**Структура описания Use Case:**
Каждый юзкейс имеет следующую структуру:
* Название
* Роль
* Цель
* Описание
* Связанные User Stories
* Предварительные условия
* Основной поток (Happy Path)
* Альтернативные потоки
* Потоки ошибок
* Результат
* Постусловия

**Дальнейшее развитие:**

Описания Use Cases в этом документе будут дополняться и детализироваться на следующих этапах разработки. Будут добавлены описания основных, альтернативных и ошибочных потоков для каждого Use Case.

## Use Cases для роли "Спортсмен"

### Регистрация и авторизация

(Описание Use Cases, связанных с регистрацией и авторизацией Спортсмена)

*   `AuthenticateUser`: Аутентифицировать пользователя.
    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет получить доступ к приложению "Miotonus" и его функционалу, используя свой аккаунт Telegram.

    Описание: Данный Use Case описывает процесс аутентификации пользователя в приложении "Miotonus". Пользователь подтверждает свою личность, используя свой аккаунт Telegram, после чего получает доступ к функционалу приложения. Если у пользователя несколько ролей, то он переходит на `SelectRole`, для выбора роли.

    Связанные User Stories:

    *   Как Спортсмен, я хочу авторизоваться в приложении через Telegram, чтобы получить доступ к своему профилю и тренировкам.
    *   Как Тренер, я хочу авторизоваться в приложении через Telegram, чтобы получить доступ к своим данным и данным моих подопечных.
    *   Как пользователь, я хочу зарегистрироваться в системе, чтобы начать использовать её функционал.
    
    Предварительные условия:

    *   У пользователя должен быть установлен Telegram.
    *   Пользователь должен иметь действующий аккаунт в Telegram.
    *   Пользователь должен запустить приложение Miotonus.

    Основной поток (Happy Path):

    1.  Пользователь запускает приложение "Miotonus".
    2.  Приложение предлагает пользователю авторизоваться через Telegram.
    3.  Пользователь нажимает кнопку "Авторизоваться через Telegram".
    4.  Приложение перенаправляет пользователя в приложение Telegram.
    5.  Telegram запрашивает у пользователя подтверждение авторизации в приложении "Miotonus".
    6.  Пользователь подтверждает авторизацию в Telegram.
    7.  Telegram отправляет токен авторизации обратно в приложение "Miotonus".
    8.  Приложение "Miotonus" проверяет полученный токен.
    9.  Приложение "Miotonus" проверяет, зарегистрирован ли уже пользователь.
    10. Если пользователь не зарегистрирован, то ему предлагается пройти регистрацию, в соответствии с ролью.
    11. Если пользователь зарегистрирован, то приложение "Miotonus" аутентифицирует пользователя.
    12. Пользователь получает доступ к функционалу приложения в соответствии со своей ролью (Спортсмен или Тренер).

    Альтернативные потоки:

    *   Отмена авторизации:
        *   На шаге 6 пользователь отменяет авторизацию в Telegram.
        *   Приложение "Miotonus" показывает сообщение об отмене авторизации.
        *   Приложение предлагает повторить процесс авторизации.
    *   Нет приложения Telegram:
        *   На шаге 4 приложение не может перенаправить пользователя в Telegram.
        *   Приложение предлагает установить telegram.
    *   Пользователь передумал:
        *   На любом шаге пользователь закрывает приложение.
        *   Процесс авторизации прерывается.
    *   Пользователь уже авторизован:
        *   Если пользователь уже авторизован в приложении, то ему не требуется проходить весь процесс заново.
        *   Приложение сразу предоставляет доступ к функционалу.

    Потоки ошибок:

    *   Если на шаге 9 пользователь зарегистрирован как спортсмен и тренер, то вызвать `SelectRole`
    *   Если на шаге 9 пользователь зарегистрирован как спортсмен или тренер, то сразу переходить в профиль.
    *   Если на шаге 12 пользователь выбрал роль, то переход на главный экран, соответствующий выбранной роли.
    *   Неверный токен:
        *   На шаге 8 приложение "Miotonus" обнаруживает, что токен неверный или истек.
        *   Приложение "Miotonus" отображает сообщение об ошибке аутентификации.
        *   Приложение предлагает повторить процесс авторизации.
    *   Ошибка сети:
        *   На любом шаге возникает ошибка сетевого подключения.
        *   Приложение "Miotonus" отображает сообщение об ошибке сети.
        *   Приложение предлагает повторить попытку позже.
    *   Ошибка на стороне Telegram:
        *   На шаге 7 Telegram не отправляет токен авторизации.
        *   Приложение показывает ошибку.
        *   Приложение предлагает повторить авторизацию.

    Результат:

    *   Успешный: Пользователь успешно аутентифицирован и получил доступ к функционалу приложения в соответствии со своей ролью.
    *   Неуспешный: Пользователь не аутентифицирован и не получил доступа к функционалу приложения. Приложение отображает сообщение об ошибке или предлагает повторить попытку.

    Постусловия:

    *   Пользователь аутентифицирован в системе.
    *   Пользователю доступен функционал в соотвествии с ролью.
    *   Приложение помнит об авторизации пользователя до тех пор, пока пользователь не выйдет из системы.
    *   Пользователь либо зарегистрирован в системе, либо ему предложено пройти регистрацию.

*   `SelectRole`: Выбрать роль.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь выбирает, под какой ролью он хочет войти в приложение, если у него есть несколько ролей.

    Описание: Данный Use Case описывает процесс выбора роли пользователем, если у него есть аккаунты и Спортсмена, и Тренера. После успешной аутентификации, приложение предлагает пользователю выбрать нужную роль.

    Связанные User Stories:

    *   Как пользователь с несколькими ролями, я хочу иметь возможность выбирать, под какой ролью мне войти в приложение.

    Предварительные условия:

    * Пользователь успешно авторизован.
    * У пользователя есть несколько ролей.

    Основной поток (Happy Path):

    1.  Приложение определяет, что у пользователя есть несколько ролей.
    2.  Приложение отображает экран выбора роли с двумя кнопками: "Войти как Спортсмен" и "Войти как Тренер".
    3.  Пользователь выбирает нужную роль.
    4.  Приложение перенаправляет пользователя в профиль выбранной роли.

    Альтернативные потоки:

    * Пользователь закрыл приложение, процесс выбора роли прерывается.

    Потоки ошибок:

    * отсутствуют.

    Результат:

    * Успешный: Пользователь перенаправлен в профиль выбранной роли.
    * Неуспешный: отсутствуют.

    Постусловия:

    * Пользователь находится в профиле выбранной роли.

### Профиль

(Описание Use Cases, связанных с профилем Спортсмена)

*   `ViewPublicProfile`: Просмотреть публичный профиль.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет просмотреть публичный профиль другого пользователя (Спортсмена или Тренера), чтобы получить общую информацию о нем.

    Описание: Данный Use Case описывает процесс просмотра пользователем публичного профиля другого пользователя.  Этот Use Case является абстрактным и предоставляет общую логику для просмотра публичных профилей. Конкретные Use Cases (`ViewCoachPublicProfile`, `ViewAthletePublicProfile`) будут вызывать этот Use Case, расширяя его функциональность в соответствии с требованиями. Данный юзкейс так же используется для проверки доступности профиля, в случае его удаления.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть публичный профиль, чтобы получить общую информацию о пользователе.
    *   Как Тренер, я хочу просмотреть публичный профиль, чтобы получить общую информацию о пользователе.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в роли "Спортсмен" или "Тренер".
    *   Просматриваемый пользователь должен существовать в системе.

    Основной поток (Happy Path):

    1.  Пользователь инициирует просмотр публичного профиля.
    2.  Приложение проверяет, существует ли пользователь, чей профиль запрашивается.
    3.  Приложение загружает общие данные публичного профиля.
    4.  Приложение отображает общие данные публичного профиля:
        *   ФИО пользователя.
        *   Аватар пользователя.
        *   Город пользователя.
        * Другая общая информация.
    5. Дальнейшая логика реализуется в конкретном юзкейсе (`ViewCoachPublicProfile`, `ViewAthletePublicProfile` и т.п.).
    6. Пользователь может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Пользователь не найден:**
        *   На шаге 2, если пользователь, чей профиль запрашивается, не существует, приложение отображает сообщение "Пользователь не найден".
        *   Пользователь возвращается на предыдущий экран.
    2.  **Нет доступа:**
        *   На шаге 2, если у пользователя нет доступа к просмотру данного профиля, приложение отображает сообщение "Нет доступа".
        *   Пользователь возвращается на предыдущий экран.
    3. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 3, если приложение не может загрузить данные профиля (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Пользователю предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Пользователь успешно начал процесс просмотра публичного профиля.
    *   **Неуспешный:** Пользователь не смог просмотреть публичный профиль из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Пользователь находится на экране начала просмотра публичного профиля.
    *   Данные профиля, если они доступны, отображаются.
    * Дальнейшее выполнение происходит в конкретном юзкейсе (`ViewCoachPublicProfile`, `ViewAthletePublicProfile` и т.п.)
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.


*   `ViewAthletePrivateProfile`: Просмотреть личный профиль спортсмена.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть свой личный профиль, чтобы убедиться, что все его данные верны, и управлять настройками аккаунта.

    Описание: Данный Use Case описывает процесс просмотра Спортсменом своего личного профиля, в котором содержится полная информация о спортсмене, включая личные данные, настройки аккаунта и прочее.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть свой личный профиль, чтобы убедиться, что все мои данные указаны верно.
    *   Как Спортсмен, я хочу отредактировать свои данные в профиле (ФИО, дата рождения, абсолютный максимальный рост, абсолютный минимальный рост, вес, аватар, город), чтобы мои данные в приложении были актуальными.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".

    Основной поток (Happy Path):

    1.  Спортсмен переходит в раздел "Профиль" (например, через соответствующий пункт меню).
    2.  Приложение отображает экран с личным профилем спортсмена, который включает в себя:
        *   ФИО спортсмена.
        *   Дата рождения.
        *   Город спортсмена.
        *   Абсолютный максимальный рост.
        *   Абсолютный минимальный рост.
        *   Вес.
        *   Аватар.
        *   Данные об аккаунте.
    3.  Спортсмен просматривает свой профиль.
    4.  Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Нет соединения с интернетом:**
        *   При отсутствии соединения с интернетом, приложение проверяет наличие сохраненной локальной копии профиля.
        *   **Если локальная копия есть:** Приложение отображает сохраненную локальную копию профиля.
        *   **Если локальной копии нет:** Приложение отображает сообщение об отсутствии соединения с интернетом и недоступности данных.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные профиля спортсмена (например, из-за ошибки сервера или сетевой проблемы), и отсутствует локальная копия, приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
        *   **Если локальная копия есть:** Приложение отображает сохраненную локальную копию профиля.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел свой личный профиль, получив доступ ко всем своим данным (либо актуальным, либо из локальной копии).
    *   **Неуспешный:** Спортсмен не смог просмотреть свой личный профиль из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра своего личного профиля.
    *   Данные профиля отображены корректно, если они доступны (либо актуальные, либо из локальной копии).
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `EditAthletePrivateProfile`: Редактировать личный профиль спортсмена.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет редактировать свой личный профиль, чтобы обновлять свои личные данные, управлять настройками аккаунта и обеспечивать актуальность информации в приложении.

    Описание: Данный Use Case описывает процесс редактирования Спортсменом своего личного профиля. Спортсмен может изменять ФИО, дату рождения, город, абсолютный максимальный рост, абсолютный минимальный рост, вес, аватар, и другие данные, связанные с аккаунтом.

    Связанные User Stories:

    *   Как Спортсмен, я хочу отредактировать свои данные в профиле (ФИО, дата рождения, абсолютный максимальный рост, абсолютный минимальный рост, вес, аватар, город), чтобы мои данные в приложении были актуальными.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться в своем личном профиле (через `ViewAthletePrivateProfile`).

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewAthletePrivateProfile`.
    2.  Спортсмен нажимает кнопку "Редактировать профиль".
    3.  Приложение отображает экран редактирования личного профиля, содержащий поля для изменения:
        *   ФИО.
        *   Дата рождения.
        *   Город.
        *   Абсолютный максимальный рост.
        *   Абсолютный минимальный рост.
        *   Вес.
        *   Аватар.
        *   Данные аккаунта.
    4.  Спортсмен вносит необходимые изменения в одно или несколько полей.
    5.  Спортсмен нажимает кнопку "Сохранить".
    6.  Приложение проверяет корректность введенных данных.
    7.  Приложение сохраняет изменения на сервере.
    8.  Приложение отображает обновлённый личный профиль (`ViewAthletePrivateProfile`).

    Альтернативные потоки:

    1.  **Отмена редактирования:**
        *   На шаге 5, Спортсмен нажимает кнопку "Отмена" или возвращается на предыдущий экран, не сохраняя изменений.
        *   Приложение закрывает экран редактирования и возвращает спортсмена на экран `ViewAthletePrivateProfile` без сохранения изменений.
    2. **Не измененные данные:**
        * На шаге 5 пользователь нажимает кнопку сохранить, при этом не изменив никаких данных.
        * Приложение закрывает экран редактирования и возвращает спортсмена на экран `ViewAthletePrivateProfile`.
    3.  **Нет соединения с интернетом:**
        *   На шаге 7, при отсутствии соединения с интернетом, приложение проверяет наличие сохраненной локальной копии профиля.
        *   **Если локальная копия есть:** Приложение сохраняет изменения в локальной копии.
        *   **Если локальной копии нет:** Приложение создает локальную копию профиля с текущими данными и сохраняет изменения в неё.
        *   Приложение отображает сообщение о том, что изменения сохранены локально, и будут синхронизированы с сервером при восстановлении соединения.
        *   Приложение закрывает экран редактирования и возвращает спортсмена на экран `ViewAthletePrivateProfile`.

    Потоки ошибок:

    1.  **Некорректные данные:**
        *   На шаге 6, если введенные данные не соответствуют требованиям (например, некорректный формат даты, неверный тип данных), приложение отображает сообщение об ошибке с указанием, какие именно данные введены неверно.
        *   Спортсмену предлагается исправить данные и повторить попытку.
    2.  **Ошибка сохранения:**
        *   На шаге 7, если приложению не удалось сохранить данные на сервере (например, из-за ошибки сервера или сетевой проблемы), приложение проверяет наличие сохраненной локальной копии профиля.
         *   **Если локальная копия есть:** Приложение сохраняет изменения в локальной копии.
         *   **Если локальной копии нет:** Приложение создает локальную копию профиля с текущими данными и сохраняет изменения в неё.
        *   Приложение отображает сообщение об ошибке сохранения, а также сообщение о том, что изменения сохранены локально, и будут синхронизированы с сервером при восстановлении соединения.
        *   Спортсмену предлагается повторить попытку позже.
    3.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно отредактировал свой личный профиль, и изменения были сохранены (либо на сервере, либо в локальной копии).
    *   **Неуспешный:** Спортсмен не смог отредактировать свой личный профиль из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране `ViewAthletePrivateProfile`.
    *   Данные профиля отображены корректно, если они сохранены (либо актуальные, либо из локальной копии).
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `SwitchRole`: Переключиться на роль.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь, имеющий несколько ролей, хочет переключиться между ними (например, с "Спортсмена" на "Тренера" или наоборот) без необходимости повторной аутентификации. Пользователь, имеющий только одну роль, хочет иметь возможность создать новую роль.

    Описание: Данный Use Case описывает процесс переключения между ролями. Пользователь может переключаться между ролями, если у него зарегистрировано несколько ролей. Если у пользователя только одна роль, ему предлагается создать новую. Приложение запоминает последнюю активную роль пользователя.

    Связанные User Stories:

    *   Как пользователь, я хочу иметь возможность переключаться между ролями в любое время.
    *   Как Тренер, я хочу переключиться на роль Спортсмена, чтобы использовать функционал Спортсмена.
    *   Как Спортсмен, я хочу переключиться на роль Тренера, чтобы использовать функционал Тренера.
    *   Как пользователь с несколькими ролями, я хочу иметь возможность выбирать, под какой ролью мне войти в приложение.
    *   Как пользователь, я хочу создать новую роль, если у меня её нет.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в любой роли.

    Основной поток (Happy Path):

    1.  Пользователь инициирует переключение роли.
    2.  Приложение отображает список доступных ролей.
    3.  Пользователь выбирает роль, на которую хочет переключиться.
    4.  Приложение переключает пользователя на выбранную роль.
    5.  Приложение отображает главный экран, соответствующий выбранной роли.

    Альтернативные потоки:

    1.  **Переключение на текущую роль:**
        *   На шаге 3 пользователь выбирает роль, в которой он уже находится.
        *   Приложение не выполняет никаких действий.
    2.  **Нет доступных ролей:**
        *   На шаге 2 приложение определяет, что у пользователя только одна роль.
        *   Приложение предлагает создать новую роль.
        *   Если пользователь принимает предложение, то выполняется `CreateRole`.
        * Приложение возвращается в тоже состояние, в котором было перед вызовом данного юзкейса.
    3.  **Ошибка загрузки:**
        *   При возникновении ошибки при загрузке профиля другой роли, приложение отображает ошибку.

    Потоки ошибок:

    1.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Пользователь успешно переключился на выбранную роль.
    *   **Неуспешный:** Пользователь не смог переключиться на выбранную роль из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Пользователь находится на главном экране, соответствующем выбранной роли.
    *   Приложение запомнило последнюю активную роль пользователя.
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

*   `CreateRole`: Создать роль.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Создать новую роль.

    Описание: Данный Use Case отвечает за создание новой роли. Для её создания пользователю предлагается заполнить необходимые поля.

    Связанные User Stories:

    *   Как пользователь, я хочу создать новую роль, если у меня её нет.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в любой роли.

    Основной поток (Happy Path):

    1.  Пользователь инициировал создание роли.
    2.  Приложение предлагает выбрать роль "Спортсмен" или "Тренер".
    3.  После выбора роли пользователь заполняет необходимые поля.
    4.  Пользователь сохраняет изменения.
    5.  Приложение создаёт новую роль.
    6.  Приложение переключает пользователя на созданную роль.
    7.  Приложение отображает главный экран, соответствующий созданной роли.

    Альтернативные потоки:

    1.  **Отмена:**
        *   Пользователь отменяет создание роли.
        *   Приложение возвращает пользователя в меню `SwitchRole`.

    Потоки ошибок:

    1.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.
    2.  **Неверные данные:**
        *   На шаге 4 введены неверные данные.
        *   Приложение выводит соответствующую ошибку.

    Результат:

    *   **Успешный:** Роль создана, и пользователь переключен на неё.
    *   **Неуспешный:** Роль не создана.

    Постусловия:

    *   Создана новая роль.
    *   Пользователь находится на главном экране, соответствующем созданной роли.
    * Приложение запомнило последнюю роль.
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

### Взаимодействие с тренером

(Описание Use Cases, связанных с взаимодействием Спортсмена с тренером)

*   `ViewCoachList`: Просмотреть список тренеров.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть список тренеров, чтобы найти тренера, с которым он хотел бы работать.

    Описание: Данный Use Case описывает процесс просмотра Спортсменом списка тренеров, зарегистрированных в приложении. Спортсмен может увидеть краткую информацию о каждом тренере, такую как ФИО, город, специализацию, аватар. Спортсмен может отфильтровать список тренеров по различным параметрам, используя юзкейс `FilterCoachList`.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть список тренеров, чтобы найти тренера, с которым я хотел бы работать.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   В системе должны быть зарегистрированы тренеры.

    Основной поток (Happy Path):

    1.  Спортсмен переходит в раздел "Список тренеров".
    2.  Приложение отображает экран со списком тренеров.
    3.  Для каждого тренера отображается:
        *   ФИО тренера.
        *   Аватар тренера.
        *   Город тренера.
        *   Специализация тренера.
    4.  Спортсмен просматривает список тренеров.
    5.  Спортсмен может вызвать юзкейс `ViewCoachPublicProfile `.
    6.  Спортсмен может инициировать `FilterCoachList`.
    7.  Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Список тренеров пуст:**
        *   На шаге 2, если в системе нет зарегистрированных тренеров, приложение отображает сообщение "Список тренеров пуст".
        *   Спортсмен может вернуться на предыдущий экран.
    2.  **Нет соединения с интернетом:**
        *   При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        *   Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные о тренерах (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел список тренеров и получил доступ к информации о каждом тренере.
    *   **Неуспешный:** Спортсмен не смог просмотреть список тренеров из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра списка тренеров.
    *   Данные о тренерах отображены корректно, если они доступны.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `FilterCoachList`: Отфильтровать список тренеров.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет отфильтровать список тренеров по определенным критериям (город, специализация, опыт работы), чтобы быстрее найти тренера, соответствующего его потребностям.

    Описание: Данный Use Case описывает процесс фильтрации Спортсменом списка тренеров. Спортсмен может задать один или несколько критериев фильтрации, и приложение отобразит только тех тренеров, которые соответствуют этим критериям.

    Связанные User Stories:

    *   Как Спортсмен, я хочу отфильтровать список тренеров по (городу, специализации, опыту работы), чтобы найти тренера, который соответствует моим потребностям.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    * Спортсмен находится на экране `ViewCoachList`.
    * В системе должны быть зарегистрированы тренеры.

    Основной поток (Happy Path):

    1.  Спортсмен инициирует фильтрацию списка тренеров.
    2. Приложение отображает параметры фильтрации (город, специализация, опыт работы).
    3. Спортсмен выбирает один или несколько параметров фильтрации.
    4. Спортсмен сохраняет изменения.
    5. Приложение применяет фильтры и отображает отфильтрованный список тренеров.
    6. Спортсмен просматривает отфильтрованный список тренеров.

    Альтернативные потоки:
    1. **Сброс фильтров**:
    * Спортсмен решает сбросить все выбранные фильтры.
    * Приложение отображает полный список тренеров.
    2. **Нет подходящих тренеров**:
    * Если нет тренеров, подходящих по фильтру, приложение отображает сообщение об этом.

    Потоки ошибок:

    1.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.
    2.  **Ошибка загрузки данных:**
        *   На шаге 5, если приложение не может отфильтровать данные о тренерах (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки.

    Результат:

    *   **Успешный:** Спортсмен успешно отфильтровал список тренеров по заданным критериям.
    *   **Неуспешный:** Спортсмен не смог отфильтровать список тренеров из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра отфильтрованного списка тренеров.
    *   Данные о тренерах отображены корректно, если они доступны.
    * Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `ViewCoachPublicProfile `: Просмотреть профиль тренера.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть подробную информацию о тренере, чтобы принять решение о том, стоит ли отправлять запрос на добавление в подопечные, либо принять/отклонить предложение от тренера.

    Описание: Данный Use Case описывает процесс просмотра Спортсменом профиля выбранного тренера. В профиле может содержаться информация: ФИО, аватар, город, специализация, опыт работы, описание тренера, отзывы. На экране также отображается информация об отправленном запросе или возможность его отправить, или отозвать, или принять/отклонить предложение.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть профиль тренера (специализация, опыт, описание), чтобы узнать больше о тренере, с которым я планирую работать.
    * Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, прямо на экране профиля тренера.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране списка тренеров (`ViewCoachList`) или другим способом попасть на этот юзкейс.
    *   Тренер, чей профиль просматривается, должен быть зарегистрирован в системе.

    Основной поток (Happy Path):

    1.  Спортсмен выбирает тренера, чей профиль он хочет просмотреть.
    2.  Приложение отображает экран с подробным профилем выбранного тренера.
    3.  На экране отображается следующая информация:
        *   ФИО тренера.
        *   Аватар тренера.
        *   Город тренера.
        *   Специализация тренера.
        *   Опыт работы тренера.
        *   Описание тренера.
        *   Отзывы о тренере.
    4. Приложение проверяет, был ли уже отправлен запрос/предложение этому тренеру (от спортсмена или тренера).
    5. **Если запрос не был отправлен, и тренер не отправлял предложения:**
        *   На экране отображается кнопка "Отправить запрос".
        *   Спортсмен может инициировать отправку запроса (`SendRequestToCoach`).
    6. **Если запрос уже был отправлен спортсменом:**
        * На экране отображается кнопка "Отозвать запрос".
        * Спортсмен может инициировать отзыв запроса (`WithdrawRequestToCoach`).
    7. **Если тренер отправил предложение стать подопечным**:
        * На экране отображаются кнопки "Принять" и "Отклонить".
        * Спортсмен может инициировать принятие предложения (`AcceptCoachOffer`).
        * Спортсмен может инициировать отклонение предложения (`DeclineCoachOffer`).
    8.  Спортсмен просматривает профиль тренера.
    9. Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Тренер не найден:**
        *   На шаге 1, если тренера, которого ищет Спортсмен, не существует, приложение отображает сообщение "Тренер не найден".
        *   Спортсмен может вернуться на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные профиля тренера (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.
    3. **Тренер удалён**:
        * Если тренер удалил свой аккаунт, то профиль не доступен, и выводится соответствующее сообщение.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел подробный профиль тренера, получив доступ ко всей доступной информации. На экране отображена информация об отправленном запросе, или возможность его отправить/отозвать, или принять/отклонить предложение от тренера.
    *   **Неуспешный:** Спортсмен не смог просмотреть профиль тренера из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра профиля тренера.
    *   Данные профиля отображены корректно, если они доступны.
    * На экране отображена информация об отправленном запросе, или возможность его отправить/отозвать, или принять/отклонить предложение от тренера.
    * Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `SendRequestToCoach`: Отправить запрос на добавление в подопечные к тренеру.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет отправить тренеру запрос на добавление в подопечные, чтобы начать с ним работать.

    Описание: Данный Use Case описывает процесс отправки Спортсменом запроса тренеру на добавление в подопечные. После отправки запроса, тренер получает уведомление о новом запросе.

    Связанные User Stories:

    *   Как Спортсмен, я хочу отправить запрос на добавление в подопечные к тренеру, чтобы начать работать с ним.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране просмотра профиля тренера (`ViewCoachPublicProfile `).
    *   Тренер, которому отправляется запрос, должен быть зарегистрирован в системе.

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewCoachPublicProfile `.
    2.  Спортсмен инициирует отправку запроса тренеру (например, нажимая кнопку "Отправить запрос").
    3.  Приложение создает запрос на добавление в подопечные.
    4.  Приложение отправляет запрос тренеру.
    5.  Приложение уведомляет тренера о новом запросе.
    6.  Приложение отображает сообщение об успешной отправке запроса.
    7.  Спортсмен возвращается на экран `ViewCoachPublicProfile `

    Альтернативные потоки:

    1. **Тренер не доступен**:
        * Если тренер удалил свой аккаунт, то запрос не может быть отправлен.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка отправки запроса:**
        *   На шаге 4, если приложение не может отправить запрос (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке отправки запроса.
        *   Спортсмену предлагается повторить попытку отправки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно отправил запрос тренеру, и тренер был уведомлен о новом запросе.
    *   **Неуспешный:** Спортсмен не смог отправить запрос тренеру из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер получил уведомление о запросе от спортсмена.
    *   Спортсмен находится на экране `ViewCoachPublicProfile `
    *   На экране отображена информация об отправленном запросе.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `WithdrawRequestToCoach`: Отозвать запрос на добавление в подопечные к тренеру.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет отозвать ранее отправленный запрос тренеру на добавление в подопечные.

    Описание: Данный Use Case описывает процесс отзыва Спортсменом ранее отправленного запроса тренеру на добавление в подопечные. После отзыва запроса тренер больше не увидит его.

    Связанные User Stories:

    *   Как Спортсмен, я хочу отозвать ранее отправленный запрос тренеру, если я передумал.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране просмотра профиля тренера (`ViewCoachPublicProfile `) или на экране отправленных запросов (`ViewSentRequestToCoach`).
    *   Спортсмен ранее должен был отправить запрос тренеру (`SendRequestToCoach`).

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewCoachPublicProfile ` или `ViewSentRequestToCoach`
    2.  Спортсмен инициирует отзыв запроса тренеру (например, нажимая кнопку "Отозвать запрос").
    3.  Приложение отменяет запрос на добавление в подопечные.
    4.  Приложение уведомляет тренера об отзыве запроса.
    5.  Приложение отображает сообщение об успешном отзыве запроса.
    6.  Спортсмен возвращается на экран `ViewCoachPublicProfile ` или `ViewSentRequestToCoach`

    Альтернативные потоки:

    1. **Тренер не доступен**:
        * Если тренер удалил свой аккаунт, то запрос не может быть отозван.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка отзыва запроса:**
        *   На шаге 3, если приложение не может отозвать запрос (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке отзыва запроса.
        *   Спортсмену предлагается повторить попытку отзыва или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно отозвал запрос тренеру, и тренер был уведомлен об отзыве.
    *   **Неуспешный:** Спортсмен не смог отозвать запрос тренеру из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер получил уведомление об отзыве запроса от спортсмена.
    *   Спортсмен находится на экране `ViewCoachPublicProfile ` или `ViewSentRequestToCoach`
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `ViewSentRequestToCoach`: Просмотреть список отправленных запросов тренеру.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть список отправленных им запросов на добавление в подопечные к тренерам, чтобы отслеживать, кому он уже отправил запросы.

    Описание: Данный Use Case описывает процесс просмотра Спортсменом списка отправленных им запросов на добавление в подопечные к тренерам. В списке отображаются тренеры, которым был отправлен запрос. Спортсмен может отозвать запрос через `WithdrawRequestToCoach`.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть список своих запросов к тренерам, чтобы понимать, кому я уже отправлял запросы.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен был ранее отправить хотя бы один запрос тренеру (`SendRequestToCoach`).

    Основной поток (Happy Path):

    1.  Спортсмен переходит в раздел "Отправленные запросы" (например, через соответствующий пункт меню).
    2.  Приложение отображает список тренеров, которым Спортсмен отправлял запросы на добавление в подопечные.
    3.  Для каждого тренера в списке отображается:
        *   ФИО тренера.
        *   Дата отправки запроса.
    4. Спортсмен может перейти к просмотру профиля тренера (`ViewCoachPublicProfile `)
    5. Спортсмен может инициировать отзыв запроса (`WithdrawRequestToCoach`).
    6.  Спортсмен просматривает список отправленных запросов.
    7.  Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Список запросов пуст:**
        *   На шаге 2, если Спортсмен не отправлял запросы ни одному тренеру, приложение отображает сообщение "Список запросов пуст".
        *   Спортсмен может вернуться на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные об отправленных запросах (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел список отправленных запросов и получил информацию о том, кому он отправлял запросы.
    *   **Неуспешный:** Спортсмен не смог просмотреть список отправленных запросов из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра списка отправленных запросов.
    *   Данные об отправленных запросах отображены корректно, если они доступны.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `ViewCoachOffers`: Просмотреть предложения от тренеров.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть список всех предложений от тренеров стать подопечным, чтобы принять решение о том, с кем из них он хочет работать.

    Описание: Данный Use Case описывает процесс просмотра Спортсменом списка всех предложений от тренеров стать подопечным. В списке отображаются все тренеры, которые отправили Спортсмену предложение.

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть все предложения от тренеров, чтобы принять решение о том, с кем из них я хочу работать.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Хотя бы один тренер должен отправить предложение Спортсмену (`SendOfferToAthlete`).

    Основной поток (Happy Path):

    1.  Спортсмен переходит в раздел "Предложения от тренеров" (например, через соответствующий пункт меню или уведомление).
    2.  Приложение отображает список тренеров, которые отправили Спортсмену предложения стать подопечным.
    3.  Для каждого тренера в списке отображается:
        *   ФИО тренера.
        *   Дата отправки предложения.
        * Специализация.
        * Опыт.
    4. Спортсмен может принять предложение (`AcceptCoachOffer`)
    5. Спортсмен может отклонить предложение (`DeclineCoachOffer`).
    6.  Спортсмен просматривает список предложений.
    7.  Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Список предложений пуст:**
        *   На шаге 2, если Спортсмену не было отправлено ни одного предложения, приложение отображает сообщение "Предложений от тренеров нет".
        *   Спортсмен может вернуться на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные о предложениях (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел список предложений от тренеров и получил информацию о каждом предложении.
    *   **Неуспешный:** Спортсмен не смог просмотреть список предложений из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра списка предложений от тренеров.
    *   Данные о предложениях отображены корректно, если они доступны.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `AcceptCoachOffer`: Принять предложение тренера стать подопечным.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет принять предложение тренера стать его подопечным и начать с ним работать.

    Описание: Данный Use Case описывает процесс принятия Спортсменом предложения от тренера стать его подопечным. Спортсмен может принять предложение на экране `ViewCoachOffers` или на экране `ViewCoachPublicProfile `

    Связанные User Stories:

    *   Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, чтобы начать или не начинать с ним работать.
    * Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, прямо на экране профиля тренера.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране `ViewCoachOffers` или `ViewCoachPublicProfile `.
    *   Тренер должен отправить спортсмену предложение стать подопечным (`SendOfferToAthlete`).

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewCoachOffers` или `ViewCoachPublicProfile `.
    2. Спортсмен выбирает тренера, чьё предложение он хочет принять.
    3.  Спортсмен инициирует принятие предложения от тренера.
    4.  Приложение добавляет тренера в список подопечных спортсмена.
    5.  Приложение уведомляет тренера о том, что Спортсмен принял его предложение.
    6.  Приложение отображает сообщение об успешном принятии предложения.
    7. Спортсмен возвращается на экран `ViewCoachOffers` или `ViewCoachPublicProfile `.

    Альтернативные потоки:

    1. **Тренер не доступен**:
        * Если тренер удалил свой аккаунт, то принять предложение не возможно.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка принятия предложения:**
        *   На шаге 4, если приложение не может принять предложение (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Спортсмену предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно принял предложение тренера, и тренер был уведомлен об этом. Спортсмен и тренер добавлены друг к другу в список.
    *   **Неуспешный:** Спортсмен не смог принять предложение тренера из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер добавлен в список подопечных спортсмена.
    *   Спортсмен добавлен в список подопечных тренера.
    *   Тренер получил уведомление о принятии предложения.
    * Спортсмен возвращается на экран `ViewCoachOffers` или `ViewCoachPublicProfile `.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `DeclineCoachOffer`: Отклонить предложение тренера стать подопечным.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет отклонить предложение тренера стать его подопечным.

    Описание: Данный Use Case описывает процесс отклонения Спортсменом предложения от тренера стать его подопечным. Спортсмен может отклонить предложение на экране `ViewCoachOffers` или на экране `ViewCoachPublicProfile `

    Связанные User Stories:

    *   Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, чтобы начать или не начинать с ним работать.
    * Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, прямо на экране профиля тренера.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране `ViewCoachOffers` или `ViewCoachPublicProfile `.
    *   Тренер должен отправить спортсмену предложение стать подопечным (`SendOfferToAthlete`).

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewCoachOffers` или `ViewCoachPublicProfile `.
    2. Спортсмен выбирает тренера, чьё предложение он хочет отклонить.
    3.  Спортсмен инициирует отклонение предложения от тренера.
    4.  Приложение уведомляет тренера о том, что Спортсмен отклонил его предложение.
    5.  Приложение отображает сообщение об успешном отклонении предложения.
    6. Спортсмен возвращается на экран `ViewCoachOffers` или `ViewCoachPublicProfile `.

    Альтернативные потоки:

    1. **Тренер не доступен**:
        * Если тренер удалил свой аккаунт, то отклонить предложение не возможно.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка отклонения предложения:**
        *   На шаге 4, если приложение не может отклонить предложение (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Спортсмену предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно отклонил предложение тренера, и тренер был уведомлен об этом.
    *   **Неуспешный:** Спортсмен не смог отклонить предложение тренера из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер получил уведомление об отклонении предложения.
    * Спортсмен возвращается на экран `ViewCoachOffers` или `ViewCoachPublicProfile `.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `LeaveCoach`: Отказаться от роли подопечного для тренера.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет отказаться от роли подопечного для конкретного тренера, прекратив с ним работу и удалив его из списка своих тренеров.

    Описание: Данный Use Case описывает процесс отказа Спортсмена от роли подопечного для конкретного тренера. После выполнения данного Use Case, тренер больше не будет отображаться в списке тренеров спортсмена, а спортсмен не будет отображаться в списке подопечных у тренера. Тренер так же будет уведомлен о том, что спортсмен отказался от его услуг.

    Связанные User Stories:

    *   Как Спортсмен, я хочу отказаться от роли подопечного для тренера, если я больше не хочу с ним работать.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен быть подопечным у тренера.
    *   Спортсмен должен находиться на экране профиля тренера (`ViewCoachPublicProfile`) или на экране списка своих тренеров.

    Основной поток (Happy Path):

    1.  Спортсмен находится на экране `ViewCoachPublicProfile` или на экране списка своих тренеров.
    2.  Спортсмен инициирует отказ от роли подопечного для выбранного тренера (например, нажимая кнопку "Отказаться от услуг тренера").
    3.  Приложение удаляет тренера из списка тренеров спортсмена.
    4.  Приложение удаляет спортсмена из списка подопечных тренера.
    5.  Приложение уведомляет тренера о том, что Спортсмен отказался от его услуг.
    6.  Приложение отображает сообщение об успешном отказе от услуг тренера.
    7.  Спортсмен возвращается на экран `ViewCoachPublicProfile` или на экран списка своих тренеров.

    Альтернативные потоки:

    1.  **Тренер не доступен:**
        *   Если тренер удалил свой аккаунт, то отказаться от его услуг не возможно.
    2.  **Нет соединения с интернетом:**
        *   При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        *   Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка отказа от услуг:**
        *   На шаге 3 или 4, если приложение не может удалить тренера/спортсмена из списков (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке отказа от услуг.
        *   Спортсмену предлагается повторить попытку отказа или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Спортсмен успешно отказался от роли подопечного для тренера, и тренер был уведомлен об этом. Спортсмен удалён из списка подопечных тренера, а тренер удалён из списка тренеров спортсмена.
    *   **Неуспешный:** Спортсмен не смог отказаться от роли подопечного из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер удалён из списка тренеров Спортсмена.
    *   Спортсмен удалён из списка подопечных Тренера.
    *   Тренер получил уведомление об отказе от услуг.
    *   Спортсмен возвращается на экран `ViewCoachPublicProfile` или на экран списка своих тренеров.
    *   Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `CreateChat`: Создать чат.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Создать новый чат между двумя пользователями (Спортсменом и Тренером), если между ними ещё нет чата.

    Описание: Данный Use Case описывает процесс создания нового чата между двумя пользователями, когда один из них (инициатор) хочет написать сообщение другому (получателю), а чат между ними ещё не существует. Чат может быть создан как между подопечным и тренером, так и между спортсменом и тренером, которые не находятся в отношениях "подопечный/тренер".

    Связанные User Stories:

    *   Как Спортсмен, я хочу вести переписку с тренером, чтобы обсуждать мои тренировки, рекомендации и другие вопросы.
    *   Как Тренер, я хочу вести переписку со спортсменом, чтобы обсуждать тренировки, давать рекомендации и отвечать на вопросы.
    *   Как Спортсмен, я хочу иметь возможность написать сообщение тренеру, даже если я ещё не отправлял ему запрос на добавление в подопечные.
    *   Как Тренер, я хочу иметь возможность написать сообщение спортсмену, даже если он ещё не является моим подопечным.

    Предварительные условия:

    *   Пользователь-инициатор должен быть аутентифицирован в системе.
    *   Пользователь-инициатор должен находиться в роли "Спортсмен" или "Тренер".
    *   Пользователь-инициатор должен иметь доступ к профилю пользователя-получателя (через `ViewCoachPublicProfile` или `ViewAthletePublicProfile`).
    *   Между пользователем-инициатором и пользователем-получателем не должно быть активного чата.

    Основной поток (Happy Path):

    1.  Пользователь-инициатор находится на экране `ViewCoachPublicProfile` или `ViewAthletePublicProfile` и инициирует создание чата с пользователем-получателем (например, нажав кнопку "Написать сообщение").
    2.  Приложение проверяет, существует ли уже чат между этими двумя пользователями.
    3.  Приложение создаёт новый чат между пользователем-инициатором и пользователем-получателем.
    4.  Приложение добавляет созданный чат в список чатов обоих пользователей.
    5.  Приложение переводит пользователя-инициатора на экран чата с пользователем-получателем (`OpenChat`).
    6. Приложение обновляет список чатов (`ViewChatList`).

    Альтернативные потоки:

    1.  **Чат уже существует:**
        *   На шаге 2, если чат между пользователями уже существует, приложение переводит пользователя-инициатора на экран существующего чата (`OpenChat`).
        * Приложение обновляет список чатов (`ViewChatList`).
    2. **Пользователь не доступен**:
        * Если пользователь-получатель удалил свой аккаунт, то создание чата невозможно.
    3. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка создания чата:**
        *   На шаге 3, если приложение не может создать чат (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Ошибка добавления в список чатов:**
        *   На шаге 4, если приложение не может добавить созданный чат в список чатов одного из пользователей, приложение отображает сообщение об ошибке.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    3.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Новый чат успешно создан, добавлен в списки чатов обоих пользователей. Пользователь переведен на экран чата.
    *   **Неуспешный:** Чат не создан из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Между пользователем-инициатором и пользователем-получателем создан новый чат.
    *   Новый чат добавлен в списки чатов обоих пользователей.
    *   Пользователь-инициатор находится на экране чата с пользователем-получателем (`OpenChat`).
    *   Список чатов обновлён. (`ViewChatList`)
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

*   `ViewChatList`: Просмотреть список чатов.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет просмотреть список всех своих активных чатов, чтобы выбрать чат для просмотра переписки.

    Описание: Данный Use Case описывает процесс просмотра пользователем списка всех чатов, в которых он участвует. В списке отображаются только чаты, в которых была переписка. Если у пользователя нет ни одного чата, то отображается соответствующее сообщение.

    Связанные User Stories:

    *   Как Спортсмен, я хочу вести переписку с тренером, чтобы обсуждать мои тренировки, рекомендации и другие вопросы.
    *   Как Тренер, я хочу вести переписку со спортсменом, чтобы обсуждать тренировки, давать рекомендации и отвечать на вопросы.
    * Как Спортсмен, я хочу видеть список всех своих чатов, чтобы быстро переходить к нужной переписке.
    * Как Тренер, я хочу видеть список всех своих чатов, чтобы быстро переходить к нужной переписке.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в роли "Спортсмен" или "Тренер".
    *   У пользователя должны быть хотя бы один или более чатов.

    Основной поток (Happy Path):

    1.  Пользователь переходит в раздел "Чаты" (например, через соответствующий пункт меню).
    2.  Приложение загружает и отображает список чатов пользователя.
    3.  Для каждого чата отображается следующая информация:
        *   ФИО собеседника.
        *   Аватар собеседника.
        *   Текст последнего сообщения (превью).
        *   Время последнего сообщения.
        * Возможно, счётчик непрочитанных сообщений.
    4.  Пользователь просматривает список чатов.
    5.  Пользователь может выбрать чат для просмотра переписки (`OpenChat`).
    6. Пользователь может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Список чатов пуст:**
        *   На шаге 2, если у пользователя нет ни одного чата, приложение отображает сообщение "У вас пока нет ни одного чата".
        *   Пользователь может вернуться на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки списка чатов:**
        *   На шаге 2, если приложение не может загрузить список чатов (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Пользователь успешно просмотрел список своих чатов и получил информацию о каждом из них.
    *   **Неуспешный:** Пользователь не смог просмотреть список чатов из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Пользователь находится на экране просмотра списка чатов.
    *   Данные о чатах отображены корректно, если они доступны.
    * Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

*   `OpenChat`: Открыть чат.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет открыть выбранный чат, чтобы просмотреть историю переписки и отправить новое сообщение.

    Описание: Данный Use Case описывает процесс открытия чата между двумя пользователями. Пользователь может открыть чат из списка чатов (`ViewChatList`), из профиля собеседника (`ViewCoachPublicProfile` или `ViewAthletePublicProfile`) или после создания чата (`CreateChat`). При открытии чата отображается вся история переписки, а также предоставляется возможность отправить новое сообщение (`SendMessage`).

    Связанные User Stories:

    *   Как Спортсмен, я хочу вести переписку с тренером, чтобы обсуждать мои тренировки, рекомендации и другие вопросы.
    *   Как Тренер, я хочу вести переписку со спортсменом, чтобы обсуждать тренировки, давать рекомендации и отвечать на вопросы.
    *   Как Спортсмен, я хочу видеть историю своей переписки с тренером.
    * Как Тренер, я хочу видеть историю своей переписки со спортсменом.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в роли "Спортсмен" или "Тренер".
    *   Чат, который открывается, должен существовать.
    * Пользователь должен иметь доступ к чату.

    Основной поток (Happy Path):

    1.  Пользователь выбирает чат, который хочет открыть (например, из списка чатов, из профиля собеседника или после создания чата).
    2.  Приложение загружает историю переписки для выбранного чата.
    3.  Приложение отображает экран чата со всей историей переписки.
    4. На экране отображаются:
        * История переписки.
        * Поле ввода нового сообщения.
        * Кнопка "Отправить".
    5.  Пользователь может просматривать историю переписки.
    6.  Пользователь может отправить новое сообщение (`SendMessage`).
    7. Пользователь может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Чат не найден:**
        *   На шаге 2, если чат, который пытается открыть пользователь, не существует, приложение отображает сообщение "Чат не найден" или возвращается на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки истории переписки:**
        *   На шаге 2, если приложение не может загрузить историю переписки (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Пользователь успешно открыл чат, просмотрел историю переписки и имеет возможность отправить новое сообщение.
    *   **Неуспешный:** Пользователь не смог открыть чат из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Пользователь находится на экране чата.
    *   История переписки отображена корректно, если она доступна.
    * Пользователь может отправить новое сообщение.
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

*   `SendMessage`: Отправить сообщение.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет отправить текстовое сообщение другому пользователю (Спортсмену или Тренеру) в существующем чате или создать чат, если его еще нет.

    Описание: Данный Use Case описывает процесс отправки текстового сообщения в чате между двумя пользователями. Если чат между пользователями ещё не создан, то он будет создан автоматически. Пользователь должен иметь возможность ввести текст сообщения и отправить его. Сообщение должно отображаться в чате у обоих пользователей.

    Связанные User Stories:

    *   Как Спортсмен, я хочу вести переписку с тренером, чтобы обсуждать мои тренировки, рекомендации и другие вопросы.
    *   Как Тренер, я хочу вести переписку со спортсменом, чтобы обсуждать тренировки, давать рекомендации и отвечать на вопросы.
    * Как Спортсмен, я хочу отправить сообщение тренеру.
    * Как Тренер, я хочу отправить сообщение спортсмену.    
    * Как Спортсмен, я хочу получать рекомендации от тренера через чат, чтобы корректировать свои тренировки.
    * Как Тренер, я хочу давать рекомендации спортсменам через чат, чтобы помочь им корректировать свои тренировки.


    Предварительные условия:

    *   Пользователь-отправитель должен быть аутентифицирован в системе.
    *   Пользователь-отправитель должен находиться в роли "Спортсмен" или "Тренер".
    *   Пользователь-отправитель должен находиться на экране чата (`OpenChat`) с пользователем-получателем.
    * Пользователь-получатель должен быть доступен.

    Основной поток (Happy Path):

    1.  Пользователь-отправитель находится на экране чата (`OpenChat`) с пользователем-получателем.
    2.  Пользователь-отправитель вводит текст сообщения в поле ввода.
    3.  Пользователь-отправитель инициирует отправку сообщения (например, нажимая кнопку "Отправить").
    4.  Приложение проверяет, существует ли чат между пользователем-отправителем и пользователем-получателем.
    5. **Если чат не существует:**
       * Приложение создает новый чат между пользователями (`CreateChat`).
       * Приложение добавляет созданный чат в список чатов обоих пользователей.
    6.  Приложение отправляет сообщение в чат.
    7.  Приложение отображает отправленное сообщение на экране чата обоих пользователей.
    8. Приложение обновляет список чатов (`ViewChatList`)
    9. Пользователь остается на экране чата.

    Альтернативные потоки:

    1.  **Чат уже существует:**
        *   На шаге 5, если чат между пользователями уже существует, приложение переходит к шагу 6 (отправка сообщения).
    2. **Пользователь не доступен**:
        * Если пользователь-получатель удалил свой аккаунт, то отправка сообщения не возможна.
    3. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Пустое сообщение:**
        *   На шаге 2, если пользователь пытается отправить пустое сообщение, приложение отображает сообщение об ошибке.
        *   Пользователю предлагается ввести текст сообщения.
    2.  **Ошибка создания чата:**
        *   На шаге 5, если приложение не может создать чат (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    3.  **Ошибка отправки сообщения:**
        *   На шаге 6, если приложение не может отправить сообщение (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    4.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Сообщение успешно отправлено в чат. Чат был создан, если он не существовал ранее.
    *   **Неуспешный:** Сообщение не отправлено из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Сообщение отправлено в чат.
    *   Чат существует, если он был создан.
    *   Сообщение отображается на экране чата обоих пользователей.
    *   Пользователь остается на экране чата (`OpenChat`).
    *   Список чатов обновлён. (`ViewChatList`)
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

*   `LeaveChat`: Покинуть чат.

    Роль: Спортсмен (Athlete) / Тренер (Coach)

    Цель: Пользователь (Спортсмен или Тренер) хочет покинуть чат, чтобы больше не получать уведомления о новых сообщениях в нем и не видеть его в списке чатов.

    Описание: Данный Use Case описывает процесс выхода пользователя из чата. При выходе из чата пользователь больше не будет получать уведомления о новых сообщениях в этом чате. Чат также будет удален из списка чатов пользователя. При этом история сообщений чата сохраняется, но в списке чатов он отображаться больше не будет. Если пользователь решит написать собеседнику, то чат снова появится в списке. Так же после выполнения этого юзкейса, чат будет скрыт из списка чатов собеседника.

    Связанные User Stories:

    *   Как Спортсмен, я хочу вести переписку с тренером, чтобы обсуждать мои тренировки, рекомендации и другие вопросы.
    *   Как Тренер, я хочу вести переписку со спортсменом, чтобы обсуждать тренировки, давать рекомендации и отвечать на вопросы.
    *   Как Спортсмен, я хочу иметь возможность покинуть чат, если общение в нем для меня больше не актуально.
    * Как Тренер, я хочу иметь возможность покинуть чат, если общение в нем для меня больше не актуально.

    Предварительные условия:

    *   Пользователь должен быть аутентифицирован в системе.
    *   Пользователь должен находиться в роли "Спортсмен" или "Тренер".
    *   Пользователь должен находиться в чате, который хочет покинуть (`OpenChat`).
    *   Чат, который пользователь хочет покинуть, должен существовать.
    * Пользователь должен иметь доступ к данному чату.

    Основной поток (Happy Path):

    1.  Пользователь находится на экране чата (`OpenChat`).
    2.  Пользователь инициирует выход из чата (например, через пункт меню "Покинуть чат" или аналогичный).
    3.  Приложение проверяет, существует ли чат.
    4.  Приложение удаляет чат из списка чатов пользователя.
    5. Приложение обновляет список чатов (`ViewChatList`).
    6.  Приложение уведомляет собеседника о том, что пользователь покинул чат.
    7. Приложение удаляет чат из списка чатов собеседника.
    8. Приложение обновляет список чатов (`ViewChatList`) собеседника.
    9.  Приложение отображает сообщение об успешном выходе из чата.
    10. Приложение переводит пользователя на экран списка чатов (`ViewChatList`) или возвращает на предыдущий экран.

    Альтернативные потоки:

    1.  **Чат не найден:**
        *   На шаге 3, если чат, который пытается покинуть пользователь, не существует, приложение отображает сообщение "Чат не найден" или возвращается на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Пользователь может вернуться на предыдущий экран.
    3. **Чат уже покинут**:
       * Если чат уже покинут, то юзкейс завершается, ничего не делая.
    4. **Пользователь не имеет доступ к чату**:
        * Если пользователь не имеет доступа к чату, то юзкейс завершается, ничего не делая.

    Потоки ошибок:

    1.  **Ошибка удаления из списка чатов:**
        *   На шаге 4 или 7, если приложение не может удалить чат из списка чатов пользователя/собеседника (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке.
        *   Пользователю предлагается повторить попытку или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Пользователь успешно покинул чат. Чат удален из списка чатов пользователя и собеседника. Пользователь больше не получает уведомления о новых сообщениях в этом чате.
    *   **Неуспешный:** Пользователь не смог покинуть чат из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Чат удален из списка чатов пользователя.
    *   Чат удален из списка чатов собеседника.
    *   Пользователь больше не получает уведомления о новых сообщениях в этом чате.
    *   Пользователь находится на экране списка чатов (`ViewChatList`) или вернулся на предыдущий экран.
    * Список чатов обновлен. (`ViewChatList`)
    *   Пользователь находится в том же состоянии в каком был перед вызовом юзкейса.

### Тренировка

(Описание Use Cases, связанных с тренировкой Спортсмена)

*   `StartTraining`: Начать тренировку.
    Цель: Отслеживать тонус мышц. Связанные User Stories: "Как Спортсмен, я хочу начать тренировку, чтобы начать отслеживать изменение своего мышечного тонуса."
*   `PauseTraining`: Приостановить тренировку.
    (Описание)
*   `FinishTraining`: Завершить тренировку.
    (Описание)
*   `EnterMeasurement`: Ввести данные измерения (рост).
    (Описание)
*   `ViewCurrentMuscleTone`: Просмотреть текущие данные о тонусе мышц.
    (Описание)
*   `ViewTrainingProgress`: Просмотреть ход тренировки и изменения тонуса мышц в реальном времени.
    (Описание)
*   `ViewTrainingHistory`: Просмотреть историю тренировок.
    (Описание)

### Управление аккаунтом

(Описание Use Cases, связанных с управлением аккаунтом Спортсмена)

*   `LogOut`: Выйти из приложения.
    (Описание)
*   `DeleteAthleteProfile`: Удалить профиль спортсмена.
    (Описание)
*   `EnableNotifications`: Включить уведомления.
    (Описание)
*   `DisableNotifications`: Отключить уведомления.
    (Описание)

## Use Cases для роли "Тренер"

### Регистрация и авторизация

(Описание Use Cases, связанных с регистрацией и авторизацией Тренера)

*   `AuthenticateUser`: Аутентифицировать пользователя. // Описание перенесено в начало файла
*   `SelectRole`: Выбрать роль. // Описание перенесено в начало файла

### Профиль

(Описание Use Cases, связанных с профилем Тренера)

*   `ViewCoachPublicProfile `: Просмотреть профиль тренера.

    Роль: Спортсмен (Athlete)

    Цель: Спортсмен хочет просмотреть подробную информацию о тренере, чтобы принять решение о том, стоит ли отправлять запрос на добавление в подопечные, либо принять/отклонить предложение от тренера, **либо написать сообщение тренеру.**

    Описание: Данный Use Case описывает процесс просмотра Спортсменом профиля выбранного тренера. В профиле может содержаться информация: ФИО, аватар, город, специализация, опыт работы, описание тренера, отзывы. На экране также отображается информация об отправленном запросе или возможность его отправить, или отозвать, или принять/отклонить предложение. **На экране также есть кнопка "Написать сообщение", которая позволяет начать переписку с тренером, если чат ещё не был создан.**

    Связанные User Stories:

    *   Как Спортсмен, я хочу просмотреть профиль тренера (специализация, опыт, описание), чтобы узнать больше о тренере, с которым я планирую работать.
    * Как Спортсмен, я хочу принять или отклонить предложение тренера стать подопечным, прямо на экране профиля тренера.

    Предварительные условия:

    *   Спортсмен должен быть аутентифицирован в системе.
    *   Спортсмен должен находиться в роли "Спортсмен".
    *   Спортсмен должен находиться на экране списка тренеров (`ViewCoachList`) или другим способом попасть на этот юзкейс.
    *   Тренер, чей профиль просматривается, должен быть зарегистрирован в системе.

    Основной поток (Happy Path):

    1.  Спортсмен выбирает тренера, чей профиль он хочет просмотреть.
    2.  Приложение отображает экран с подробным профилем выбранного тренера.
    3.  На экране отображается следующая информация:
        *   ФИО тренера.
        *   Аватар тренера.
        *   Город тренера.
        *   Специализация тренера.
        *   Опыт работы тренера.
        *   Описание тренера.
        *   Отзывы о тренере.
    4. Приложение проверяет, был ли уже отправлен запрос/предложение этому тренеру (от спортсмена или тренера).
    5. **Если чат между Спортсменом и Тренером не был создан:**
        * **На экране отображается кнопка "Написать сообщение".**
        * **При нажатии на кнопку "Написать сообщение" вызывается `CreateChat`.**
        * **Вызывается `OpenChat`.**
    6. **Если запрос не был отправлен, и тренер не отправлял предложения:**
        *   На экране отображается кнопка "Отправить запрос".
        *   Спортсмен может инициировать отправку запроса (`SendRequestToCoach`).
    7. **Если запрос уже был отправлен спортсменом:**
        * На экране отображается кнопка "Отозвать запрос".
        * Спортсмен может инициировать отзыв запроса (`WithdrawRequestToCoach`).
    8. **Если тренер отправил предложение стать подопечным**:
        * На экране отображаются кнопки "Принять" и "Отклонить".
        * Спортсмен может инициировать принятие предложения (`AcceptCoachOffer`).
        * Спортсмен может инициировать отклонение предложения (`DeclineCoachOffer`).
    9.  Спортсмен просматривает профиль тренера.
    10. Спортсмен может вернуться на предыдущий экран.

    Альтернативные потоки:

    1.  **Тренер не найден:**
        *   На шаге 1, если тренера, которого ищет Спортсмен, не существует, приложение отображает сообщение "Тренер не найден".
        *   Спортсмен может вернуться на предыдущий экран.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Спортсмен может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 2, если приложение не может загрузить данные профиля тренера (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Спортсмену предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.
    3. **Тренер удалён**:
        * Если тренер удалил свой аккаунт, то профиль не доступен, и выводится соответствующее сообщение.

    Результат:

    *   **Успешный:** Спортсмен успешно просмотрел подробный профиль тренера, получив доступ ко всей доступной информации. На экране отображена информация об отправленном запросе, или возможность его отправить/отозвать, или принять/отклонить предложение от тренера. **А также есть возможность написать сообщение тренеру.**
    *   **Неуспешный:** Спортсмен не смог просмотреть профиль тренера из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен находится на экране просмотра профиля тренера.
    *   Данные профиля отображены корректно, если они доступны.
    * На экране отображена информация об отправленном запросе, или возможность его отправить/отозвать, или принять/отклонить предложение от тренера. **А также есть возможность написать сообщение тренеру.**
    * Спортсмен находится в том же состоянии в каком был перед вызовом юзкейса.

*   `EditCoachProfile`: Редактировать профиль тренера.
    Цель: Изменить данные в профиле. Связанные User Stories: "Как Тренер, я хочу отредактировать свои данные в профиле (ФИО, дата рождения, город, специализация, опыт работы, описание, аватар), чтобы мои данные в приложении были актуальными."

*   `ViewAthletePublicProfile`: Просмотреть публичный профиль спортсмена.

    Роль: Тренер (Coach)

    Цель: Тренер хочет просмотреть публичный профиль спортсмена, чтобы узнать его основные данные, оценить его общие характеристики, **либо написать сообщение спортсмену.**

    Описание: Данный Use Case описывает процесс просмотра Тренером публичного профиля Спортсмена, в котором содержится ограниченная информация о спортсмене. Тренер может просматривать профили как своих подопечных, так и других спортсменов. **На экране также есть кнопка "Написать сообщение", которая позволяет начать переписку со спортсменом, если чат ещё не был создан.**

    Связанные User Stories:

    *   Как Тренер, я хочу просмотреть данные профиля своего подопечного, чтобы знать его ФИО, возраст и город.
    *   Как Тренер, я хочу просмотреть профиль спортсмена, чтобы оценить его уровень и потребности.
    *   Как Тренер, я хочу просмотреть список спортсменов в приложении, чтобы найти потенциальных подопечных.

    Предварительные условия:

    *   Тренер должен быть аутентифицирован в системе.
    *   Тренер должен находиться в роли "Тренер".
    *   Спортсмен должен быть зарегистрирован в системе.
    *   Тренер должен иметь возможность просмотреть список спортсменов.

    Основной поток (Happy Path):

    1.  Тренер переходит на экран списка спортсменов (через `ViewAthleteList` или фильтр `FilterAthleteList`).
    2.  Тренер выбирает спортсмена, чей профиль он хочет просмотреть.
    3.  Приложение отображает экран с публичным профилем выбранного спортсмена, который включает в себя:
        *   ФИО спортсмена.
        *   Возраст спортсмена.
        *   Город спортсмена.
    4. **Если чат между Тренером и Спортсменом не был создан:**
        * **На экране отображается кнопка "Написать сообщение".**
        * **При нажатии на кнопку "Написать сообщение" вызывается `CreateChat`.**
        * **Вызывается `OpenChat`.**
    5.  Тренер просматривает профиль спортсмена.
    6.  Тренер может вернуться на предыдущий экран или выбрать другого спортсмена.

    Альтернативные потоки:

    1.  **Спортсмен не найден:**
        *   На шаге 2, если спортсмена, которого ищет Тренер, не существует, приложение отображает сообщение "Спортсмен не найден".
        *   Тренер может повторить поиск или вернуться на предыдущий экран.
    2.  **Нет доступа:**
        *   Если тренер не авторизован, то на шаге 1 ему будет предложена авторизация.
    3.  **Нет соединения с интернетом:**
        *   При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.

    Потоки ошибок:

    1.  **Ошибка загрузки данных:**
        *   На шаге 3, если приложение не может загрузить данные профиля спортсмена (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке загрузки данных.
        *   Тренеру предлагается повторить попытку загрузки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.
    3.  **Спортсмен удалён:**
        *   Если спортсмен удалил свой аккаунт, то профиль не доступен, и выводится соответствующее сообщение.

    Результат:

    *   **Успешный:** Тренер успешно просмотрел публичный профиль спортсмена, получив доступ ко всем доступным данным. **А также есть возможность написать сообщение спортсмену.**
    *   **Неуспешный:** Тренер не смог просмотреть публичный профиль спортсмена из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Тренер находится на экране просмотра публичного профиля спортсмена.
    *   Данные профиля отображены корректно, если они доступны.
    * **А также есть возможность написать сообщение спортсмену.**
    *   Тренер находится в том же состоянии в каком был перед вызовом юзкейса.

### Взаимодействие со спортсменами

(Описание Use Cases, связанных с взаимодействием Тренера со спортсменами)

*   `ViewAthleteList`: Просмотреть список спортсменов.
    (Описание)
*   `ViewAthleteProfile`: Просмотреть профиль спортсмена.
    (Описание)

* `SendOfferToAthlete`: Отправить предложение стать подопечным.

    Роль: Тренер (Coach)

    Цель: Тренер хочет отправить предложение конкретному спортсмену стать его подопечным.

    Описание: Данный Use Case описывает процесс отправки Тренером предложения Спортсмену стать его подопечным.

    Связанные User Stories:

    *   Как Тренер, я хочу отправить предложение стать подопечным конкретному спортсмену, чтобы предложить ему свои услуги.

    Предварительные условия:

    *   Тренер должен быть аутентифицирован в системе.
    *   Тренер должен находиться в роли "Тренер".
    *   Тренер должен находиться на экране профиля спортсмена.
    * Спортсмен, которому отправляется предложение, должен быть зарегистрирован в системе.

    Основной поток (Happy Path):

    1. Тренер находится на экране просмотра профиля спортсмена.
    2. Тренер инициирует отправку предложения стать подопечным (например, нажатием кнопки "Отправить предложение").
    3. Приложение создаёт предложение стать подопечным для выбранного спортсмена.
    4. Приложение отправляет предложение выбранному спортсмену.
    5. Приложение уведомляет спортсмена о поступившем предложении.
    6. Приложение отображает сообщение об успешной отправке предложения.
    7. Тренер возвращается на экран просмотра профиля спортсмена.

    Альтернативные потоки:

    1.  **Спортсмен не найден:**
        *   Если спортсмен удалил свой аккаунт, то предложение не может быть отправлено.
    2. **Нет соединения с интернетом**:
        * При отсутствии соединения с интернетом, приложение отображает сообщение об ошибке.
        * Тренер может вернуться на предыдущий экран.

    Потоки ошибок:

    1.  **Ошибка отправки предложения:**
        *   Если приложение не может отправить предложение (например, из-за ошибки сервера или сетевой проблемы), приложение отображает сообщение об ошибке отправки предложения.
        * Тренеру предлагается повторить попытку отправки или вернуться на предыдущий экран.
    2.  **Неизвестная ошибка:**
        *   На любом шаге может произойти непредвиденная ошибка.
        *   Приложение отображает сообщение об ошибке и предлагает обратиться в службу поддержки.

    Результат:

    *   **Успешный:** Тренер успешно отправил предложение спортсмену, и спортсмен был уведомлен о новом предложении.
    *   **Неуспешный:** Тренер не смог отправить предложение спортсмену из-за ошибки. Приложение отображает сообщение об ошибке.

    Постусловия:

    *   Спортсмен получил уведомление о предложении от тренера.
    * Тренер возвращается на экран просмотра профиля спортсмена.
    *   Тренер находится в том же состоянии в каком был перед вызовом юзкейса.

*   `ViewRequestsFromAthletes`: Просмотреть запросы от спортсменов на добавление в подопечные.
    (Описание)
*   `AcceptAthleteRequest`: Принять запрос от спортсмена на добавление в подопечные.
    (Описание)
*   `DeclineAthleteRequest`: Отклонить запрос от спортсмена на добавление в подопечные.
    (Описание)
*   `RemoveAthleteFromCoach`: Удалить спортсмена из списка подопечных.
    (Описание)
*   `FilterAthleteList`: Отфильтровать список спортсменов.
    Цель: Отфильтровать список спортсменов. Связанные User Stories: "Как Тренер, я хочу отфильтровать список своих подопечных по ФИО или группам, чтобы быстро найти нужного спортсмена."

### Работа с данными спортсменов

(Описание Use Cases, связанных с работой Тренера с данными спортсменов)

*   `ViewAthleteProfileData`: Просмотреть данные профиля подопечного.
    (Описание)
*   `ViewAthleteMeasurements`: Просмотреть данные о росте подопечного.
    (Описание)
*   `ViewAthleteTrainingHistory`: Просмотреть историю тренировок подопечного.
    (Описание)
*   `ViewAthleteStatistics`: Просмотреть статистику тренировок подопечного.
    (Описание)
*   `EnterMeasurementForAthlete`: Ввести данные о росте и весе за спортсмена.
    Цель: Внести данные за спортсмена. Связанные User Stories: "Как Тренер, я хочу вносить данные о росте за спортсмена, чтобы оперативно фиксировать данные, не отвлекая его от тренировки.", "Как Тренер, я хочу вносить данные о весе за спортсмена, чтобы оперативно фиксировать данные, не отвлекая его от тренировки."

### Работа с группами

(Описание Use Cases, связанных с работой Тренера с группами)

*   `CreateGroup`: Создать группу подопечных.
    (Описание)
*   `AddAthleteToGroup`: Добавить спортсмена в группу.
    (Описание)
*   `RemoveAthleteFromGroup`: Удалить спортсмена из группы.
    (Описание)
*   `ViewGroupList`: Просмотреть список созданных групп.
    (Описание)
*   `NameGroup`: Назвать группу.
    (Описание)
*   `RenameGroup`: Переименовать группу.
    (Описание)
*   `DeleteGroup`: Удалить группу.
    (Описание)

### Управление аккаунтом

(Описание Use Cases, связанных с управлением аккаунтом Тренера)

*   `LogOut`: Выйти из приложения.
    (Описание)
*   `DeleteCoachProfile`: Удалить профиль тренера.
    (Описание)
*   `EnableNotifications`: Включить уведомления.
    (Описание)
*   `DisableNotifications`: Отключить уведомления.
    (Описание)
